(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{490:function(s,t,a){"use strict";a.r(t);var n=a(8),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"webpack的五个核心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack的五个核心"}},[s._v("#")]),s._v(" webpack的五个核心")]),s._v(" "),a("ol",[a("li",[s._v("entry")]),s._v(" "),a("li",[s._v("output")]),s._v(" "),a("li",[s._v("loader\n"),a("ul",[a("li",[s._v("npm下载")]),s._v(" "),a("li",[s._v("在配置文件webpack.config.js使用")])])]),s._v(" "),a("li",[s._v("plugins\n"),a("ul",[a("li",[s._v("npm下载")]),s._v(" "),a("li",[s._v("在配置文件webpack.config.js引入")]),s._v(" "),a("li",[s._v("在配置文件webpack.config.js使用")])])]),s._v(" "),a("li",[s._v("mode")])]),s._v(" "),a("h2",{attrs:{id:"开发环境的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境的配置"}},[s._v("#")]),s._v(" 开发环境的配置")]),s._v(" "),a("h3",{attrs:{id:"_1-webpack初体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-webpack初体验"}},[s._v("#")]),s._v(" 1.webpack初体验")]),s._v(" "),a("ol",[a("li",[s._v("运行指令:\n"),a("ul",[a("li",[a("p",[s._v("开发环境")]),s._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("webpack "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bulid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("    js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("development\n")])])]),a("ul",[a("li",[s._v("webpack会以"),a("code",[s._v("./src/index.js")]),s._v("为入口文件开始打包，打包后输出到 "),a("code",[s._v("./bulid/build.js")])]),s._v(" "),a("li",[s._v("整体打包环境是开发环境")])])]),s._v(" "),a("li",[a("p",[s._v("生产环境")]),s._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("webpack "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bulid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("production\n")])])]),a("ul",[a("li",[s._v("整体打包环境是开发环境")])])]),s._v(" "),a("li",[a("p",[s._v("结论：")]),s._v(" "),a("ol",[a("li",[s._v("能处理js/json,不能处理css/img等其他资源")]),s._v(" "),a("li",[s._v("生产环境比开发环境多了一个压缩js代码")]),s._v(" "),a("li",[s._v("生产环境和开发环境将es6模块化编译成浏览器能识别的模块化")])])])])])]),s._v(" "),a("h3",{attrs:{id:"_2-打包样式资源（css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-打包样式资源（css"}},[s._v("#")]),s._v(" 2.打包样式资源（css")]),s._v(" "),a("ol",[a("li",[s._v("配置webpack文件 ： webpack.config.js\n"),a("ul",[a("li",[a("p",[s._v("作用：指示webpack干哪些活（当你运行webpack运行指令时，会加载里面的配置）")])]),s._v(" "),a("li",[a("p",[s._v("所有构建工具都是基于node.js平台运行的，所以模块化默认采用commonJS")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//resolve模块需要导入，属于node核心模块，用来拼接路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("expots"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//css的样式文件可以通过import导入js中")]),s._v("\n    entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出文件名")]),s._v("\n        filenmae"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bulit.js"')]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出路径")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//__dirname是模块对象的参数，代表当前文件的目录绝对路径")]),s._v("\n        path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bulid"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//loader的配置")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//loader的详细配置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不同的文件必须要用不同的loader处理")]),s._v("\n        rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//匹配哪些文件")]),s._v("\n            test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.css$/")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用哪些loader进行处理")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//use数组的执行顺序，从右到左，从下到上，依次执行")]),s._v("\n            use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在Js中给html创建style标签，将js中的样式资源插入进去，添加到head中生效。")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将css文件变成commonJS模块加载到js中，里面的内容是样式字符串")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.less$/")]),s._v("\n            use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将less文件编译成css")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//需要下载less和less-loader模块")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"less-loader"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//详细的plugins的配置")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//或者 mode :"production"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("配置完上面config.js后，直接命令行webpack就能打包，将index.js打包成built.js，并将css文件引入到js中。")])])])])]),s._v(" "),a("h3",{attrs:{id:"_3-打包html资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-打包html资源"}},[s._v("#")]),s._v(" 3.打包html资源")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("需要下载html-webpack-plugin插件")]),s._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//解构赋值方式，拿到path对象的resolve方法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" htmlWebpackPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"html-webpack-plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("expots"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            filenmae"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bulit.js"')]),s._v("\n            path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bulid"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//匹配哪些文件")]),s._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.css$/")]),s._v("\n                use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//html-webpack-plugin")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//功能：默认创建一个空的html,自动引入打包输出的所有资源（js/css）")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//需求：需要有结构的html文件")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("htmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/index.html'")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_4-打包图片资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-打包图片资源"}},[s._v("#")]),s._v(" 4.打包图片资源")]),s._v(" "),a("ol",[a("li",[s._v("当css中有图片的时候，需要用加载图片的所有loader\n"),a("ul",[a("li",[s._v("url-loader")]),s._v(" "),a("li",[s._v("file-loader(url-loader基于此loader运行)")])])])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resolve "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出文件名")]),s._v("\n        filenmae"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bulit.js"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出路径")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//__dirname是模块对象的参数表当前文件的目录绝对路径")]),s._v("\n        path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bulid"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.less/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"less-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//默认处理不了html中的img标签的图片")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理图片资源")]),s._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.(jpg|png|gif)$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"url-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                options "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//图片大小小于8kb,进行base64处理，对图片进行优化,大于8kb时,后url-loader调用file-loader进行解析")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//优点：减少请求数量，减轻服务器压力")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//缺点：生产的bulit.js体积会更大，文件请求速度变慢")]),s._v("\n                    limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//问题：因为url-loader默认使用es6模块化解析，但是html-loader引入图片时commonjs模块解析，所以两个一次用时可能会出问题")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//解决方法:关闭url-loader的es6模块化，使用commonjs")]),s._v("\n                    esModule "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//给图片重命名")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//[hash:10]取图片的hash值的前10位")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//[ext]取文件的原来的扩展名")]),s._v("\n                    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[hash:10].[ext]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定输出到bulid文件夹的哪里")]),s._v("\n                    outputPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"imgs"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理html中的图片资源，需要用html-loader")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.html$/")]),s._v("\n                loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"html-loader"')]),s._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"_5-打包其他资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-打包其他资源"}},[s._v("#")]),s._v(" 5.打包其他资源")]),s._v(" "),a("ol",[a("li",[s._v("打包除了html,js,css以外的资源\n"),a("ul",[a("li",[a("p",[s._v("在入口文件的index.js里引入字体的css文件")]),s._v(" "),a("ul",[a("li",[s._v('import "pathName"')])])]),s._v(" "),a("li",[a("p",[s._v("然后设置webpack.config.js的loader")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("   \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//排除下面这些资源的所有资源")]),s._v("\n            exclude "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.(css|js|html|less|图片等)$/")]),s._v("\n            loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file-loader"')]),s._v("\n            options "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[hash:10][ext]"')]),s._v("\n                outputPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"medias"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])])])]),s._v(" "),a("h3",{attrs:{id:"_6-开发服务器devserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-开发服务器devserver"}},[s._v("#")]),s._v(" 6.开发服务器devServer")]),s._v(" "),a("ol",[a("li",[s._v("作用：\n"),a("ul",[a("li",[s._v("自动编译")]),s._v(" "),a("li",[s._v("自动打开服务器")]),s._v(" "),a("li",[s._v("自动刷新服务器")])])]),s._v(" "),a("li",[s._v("使用：\n"),a("ul",[a("li",[a("p",[s._v("需要先下载"),a("code",[s._v("webpack-dev-server")]),s._v("模块")])]),s._v(" "),a("li",[a("p",[s._v("配置"),a("code",[s._v("webpack.config.js")]),s._v("（一般配置在mode属性的下方）")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("devServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    contentBase "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//启动gzip压缩")]),s._v("\n    compress "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//端口号")]),s._v("\n    port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("，\n    open"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("运行"),a("code",[s._v("npx webpack-dev-server")])])])])]),s._v(" "),a("li",[s._v("特点：只会在"),a("strong",[s._v("内存")]),s._v("中编译打包，不会有任何输出\n"),a("ul",[a("li",[a("code",[s._v("webpack")]),s._v("指令会输出一个bulid文件夹，把一大堆东西放里面")]),s._v(" "),a("li",[a("code",[s._v("npx webpack-dev-server")]),s._v("，只会进行打包，不会有任何输出，也就是说不会生成bulid文件夹")])])])]),s._v(" "),a("h3",{attrs:{id:"_7-配置文件的分离-必要时使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-配置文件的分离-必要时使用"}},[s._v("#")]),s._v(" 7. 配置文件的分离(必要时使用)")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("当开发环境和生产环境需要不同的配置文件时,可以,把公共部分的配置信息抽取出来成新的配置文件"),a("code",[s._v("base.config.js")]),s._v(".")])]),s._v(" "),a("li",[a("p",[s._v("下载"),a("code",[s._v("npm i webpack-merge -D")]),s._v("库")])]),s._v(" "),a("li",[a("p",[s._v("在打算使用(生产 or 开发)的配置文件中导入"),a("code",[s._v("webpack-merge")]),s._v(" "),a("code",[s._v("base.config.js")])])]),s._v(" "),a("li",[a("p",[s._v("调用"),a("code",[s._v("webpack-merge的方法")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("webpackMerge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("baseConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//单独的webpack.config.js的配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_7-开发环境的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-开发环境的配置"}},[s._v("#")]),s._v(" 7.开发环境的配置")]),s._v(" "),a("ol",[a("li",[s._v("在空文件夹下创建webpack.config.js构建配置文件")]),s._v(" "),a("li",[s._v("文件夹的的根目录下创建src文件夹，放入"),a("strong",[s._v("入口")]),s._v("(entry)用的index.js文件和"),a("strong",[s._v("模板")]),s._v("(template)用的index.html")]),s._v(" "),a("li",[s._v("如果有其他的css文件或者js文件的话，全部导入index.js中")]),s._v(" "),a("li",[s._v("index.html中的css,js引入都引入到index.js中。如果html中有图片引入的话，需要配置html-loader，否则不用。")]),s._v(" "),a("li",[s._v("配置config.js")]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV1e7411j7T5?p=10",target:"_blank",rel:"noopener noreferrer"}},[s._v("详细的视频地址"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("完整配置参照项目")])]),s._v(" "),a("h2",{attrs:{id:"生产环境的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境的配置"}},[s._v("#")]),s._v(" 生产环境的配置")]),s._v(" "),a("h3",{attrs:{id:"单独生成一个css文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单独生成一个css文件"}},[s._v("#")]),s._v(" 单独生成一个css文件")]),s._v(" "),a("ol",[a("li",[s._v("在开发配置中，css文件是在打包前导入到inde.js中进行打包的，打包完后并不生成css文件，还是直接陷入html中。")]),s._v(" "),a("li",[s._v("如果想要单独生成css文件需要用到插件\n"),a("ul",[a("li",[a("p",[s._v("下载"),a("code",[s._v("mini-css-extract-plugin")])])]),s._v(" "),a("li",[a("p",[s._v("在config.js中引入")])]),s._v(" "),a("li",[a("p",[s._v("在config.js中写入")]),s._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MiniCssExtractPlugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.test$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这个Loader取代style-loader,作用为提取js中的css成单独文件")]),s._v("\n                MiniCssExtractPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nplugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MiniCssExtractPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//对输出的文件进行重命名")]),s._v("\n            filename "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css/bulit.css"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])])])]),s._v(" "),a("h3",{attrs:{id:"css的兼容性处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css的兼容性处理"}},[s._v("#")]),s._v(" css的兼容性处理")]),s._v(" "),a("ol",[a("li",[s._v("css的兼容性处理:postcss\n"),a("ul",[a("li",[a("p",[s._v("postcss-loader")])]),s._v(" "),a("li",[a("p",[s._v("postcss-preset-env")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("帮助postcss找到package.json中的browserslist里面的配置,通过配置加载指定的css兼容性样式")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"browerslist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 1 chrome version"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 1 firefox version"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 1 safari version"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//生产环境配置(默认)")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('">0.01%"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"not dead"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"not op_mini all"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("browserslist默认是生效生产环境,如果需要在开发环境生效的话需要在webpack.config.js的全局作用域上配置")]),s._v(" "),a("div",{staticClass:"language-JS extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),s._v("\n")])])])])])]),s._v(" "),a("li",[a("p",[s._v("在config.js中配置loader")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    ident"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//postcss的插件")]),s._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postcss-preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])])])]),s._v(" "),a("h3",{attrs:{id:"压缩css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩css"}},[s._v("#")]),s._v(" 压缩css")]),s._v(" "),a("ol",[a("li",[s._v("下载插件OptimizeCssAssetsWebpackPlugin")]),s._v(" "),a("li",[s._v("引入插件")]),s._v(" "),a("li",[s._v("创建该插件的构造函数")])]),s._v(" "),a("h3",{attrs:{id:"js的语法检查eslint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js的语法检查eslint"}},[s._v("#")]),s._v(" js的语法检查Eslint")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("下载"),a("code",[s._v("eslint-loader")]),s._v(" "),a("code",[s._v("eslint")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            exclude "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/node_modules/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不检查第三方模块")]),s._v("\n            loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            options "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                fix "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//遇到不规范语句,自动修复")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("设置检查规则")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("package.json")]),s._v("中的"),a("code",[s._v("eslintConfig")]),s._v("中设置")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("eslintConfig"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置eslint的检查规则")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("可以用airbnb写的规则")]),s._v(" "),a("ul",[a("li",[s._v("下载,依赖"),a("code",[s._v("eslint-config-airbnb-base")])]),s._v(" "),a("li",[s._v("下载,依赖"),a("code",[s._v("eslint-plugin-import")])])])]),s._v(" "),a("li",[a("p",[s._v("配置"),a("code",[s._v("eslintConfig")]),s._v(":"),a("code",[s._v("extends : airbnb-base")])])])])]),s._v(" "),a("li",[a("p",[s._v("如果不希望eslint检查某些语句的话可以在那些语句上加下面注释")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//eslint-disable-next-line")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"js的兼容性处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js的兼容性处理"}},[s._v("#")]),s._v(" js的兼容性处理")]),s._v(" "),a("ol",[a("li",[s._v("js兼容处理工具:"),a("code",[s._v("babel-loader")]),s._v(" "),a("code",[s._v("@babel/preset-env")]),s._v(" "),a("code",[s._v("@babel/core")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("第一种方案:基本js兼容性处理 "),a("code",[s._v("@babel/preset-env")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("问题:只能转换基本语法,es6的新增函数,对象无法转换,如"),a("code",[s._v("promise")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("   \n            test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            exclude "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/node_modules/")]),s._v("\n            loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//预设:指示babel做怎么样的兼容性处理")]),s._v("\n                presets "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])])]),s._v(" "),a("li",[a("p",[s._v("第二种方案:全部js兼容性处理: "),a("code",[s._v("@babel/polyfill")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("该模块不需要在config.js中配置,直接导入index.js中")])]),s._v(" "),a("li",[a("p",[s._v("问题:将所有兼容性代码全部引入,体积很大")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/polyfill"')]),s._v("\n")])])])])])]),s._v(" "),a("li",[a("p",[s._v("第三种方案:("),a("strong",[s._v("推荐")]),s._v(")需要做兼容性处理的就做,按需加载:利用 "),a("code",[s._v("core-js")]),s._v("模块")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("使用此方案时,不能再在index.js中引入 "),a("code",[s._v("@babel/polyfill")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\nrules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.js$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        exclude "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/node_modules/")]),s._v("\n        loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//预设:指示babel做怎么样的兼容性处理")]),s._v("\n            presets "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//下面代码为第三种方案的代码")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//按需加载兼容性代码")]),s._v("\n                    useBulitIns "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定core-js版本")]),s._v("\n                    corejs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定兼容性做到哪个版本浏览器")]),s._v("\n                    targets "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        chrome "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"60"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        firefox "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"50"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        ie "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        safari "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        edge "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"17"')]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])]),s._v(" "),a("p",[s._v("}\n```")])])])])]),s._v(" "),a("h3",{attrs:{id:"js压缩-html压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js压缩-html压缩"}},[s._v("#")]),s._v(" js压缩,Html压缩")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("js的压缩只需要将mode设成生产环境")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("html的压缩需要在HtmlWebpackPlugin插件中设置")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            template "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index,html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//压缩html代码")]),s._v("\n            minify"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//移除空格")]),s._v("\n                collapseWhitespace "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//移除注释")]),s._v("\n                removeComments "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"生产环境的基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境的基本配置"}},[s._v("#")]),s._v(" 生产环境的基本配置")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("用"),a("code",[s._v("MiniCssExtractPlugin")]),s._v("插件来给less,css提取成单独css文件")])]),s._v(" "),a("li",[a("p",[s._v("用"),a("code",[s._v("postcss-loader")]),s._v("设置css的兼容性处理")])]),s._v(" "),a("li",[a("p",[s._v("用"),a("code",[s._v("OptimizeCssAssetWebpackPlugin")]),s._v("来压缩css文件")])]),s._v(" "),a("li",[a("p",[s._v("用"),a("code",[s._v("eslint-loader")]),s._v("来检查js文件")])]),s._v(" "),a("li",[a("p",[s._v("用"),a("code",[s._v("babel-loader")]),s._v("给js做兼容性处理")])]),s._v(" "),a("li",[a("p",[s._v("当一个文件要被多个loader处理的时候,一定要制定loader执行的先后顺序")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("对于js文件先这行"),a("code",[s._v("eslint-loader")]),s._v(" 在执行 "),a("code",[s._v("babel-loader")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("   \n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n        loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//表示先执行这个Loader")]),s._v("\n        enforce"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pre"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])])]),s._v(" "),a("li",[a("p",[s._v("用"),a("code",[s._v("HtmlWebpackPlugin")]),s._v("给html压缩")])])]),s._v(" "),a("h2",{attrs:{id:"开发环境的性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境的性能优化"}},[s._v("#")]),s._v(" 开发环境的性能优化")]),s._v(" "),a("h3",{attrs:{id:"优化打包构建速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化打包构建速度"}},[s._v("#")]),s._v(" 优化打包构建速度")]),s._v(" "),a("h4",{attrs:{id:"webpack的hmr功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack的hmr功能"}},[s._v("#")]),s._v(" webpack的HMR功能")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("全称: hot module replacement")])]),s._v(" "),a("li",[a("p",[s._v("模块热加载,一个模块发生变化,只会重新打包这一个模块,而不是所有模块,极大提高了构建速度")])]),s._v(" "),a("li",[a("p",[s._v("在config.js配置devserver属性中加hot属性")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    devserver "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n        hot "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("webpack构建的项目中")]),s._v(" "),a("ul",[a("li",[s._v("css文件默认有HMR功能,style-loader内部实现了")]),s._v(" "),a("li",[s._v("js文件默认不使用HMR功能\n"),a("ul",[a("li",[s._v("需要在入口js文件上写方法去监听其他模块的js文件"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//一旦 module.hot为true,说明开启了devserver上的HMR功能")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//然后用accept方法监听其他js文件,一旦该模块发生变化,其他的模块不会重新打包构建")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("accept")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./moduleOne.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[s._v("入口js文件修改了的话,无论如何其他模块也会重新打包构建(入口js文件无法HMR加载)")])])]),s._v(" "),a("li",[s._v("html文件不能使用HMR功能,同时会导致问题:html文件不能热更新(现在的应用html都是只有一个,所以不需要HMR功能)\n"),a("ul",[a("li",[s._v("解决 : 修改entry入口,将html文件引入")])])])])])]),s._v(" "),a("h3",{attrs:{id:"优化代码调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化代码调试"}},[s._v("#")]),s._v(" 优化代码调试")]),s._v(" "),a("h4",{attrs:{id:"source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#source-map"}},[s._v("#")]),s._v(" source-map")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("一种提供源代码到构建后代码映射的技术(如果后代码出错了,通过映射可以追踪到源代码的错误)")])]),s._v(" "),a("li",[a("p",[s._v("在config.js文件中增加devtool属性")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("devtool "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source-map"')]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("source-map")]),s._v("类型")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("source-map")]),s._v(" "),a("ul",[a("li",[s._v("外部")]),s._v(" "),a("li",[s._v("准确提示源代码的错误文件,错误行数")])])]),s._v(" "),a("li",[a("code",[s._v("inline-source-map")]),s._v(" :\n"),a("ul",[a("li",[s._v("只生成一个大的内联map")]),s._v(" "),a("li",[s._v("准确提示源代码的错误文件,错误代码行和列")])])]),s._v(" "),a("li",[a("code",[s._v("hidden-source-map")]),s._v(":\n"),a("ul",[a("li",[s._v("外部")]),s._v(" "),a("li",[s._v("不能追踪源代码错误,只能提示到构建后代码的错误位置(防止代码泄露)")]),s._v(" "),a("li",[s._v("只隐藏源代码")])])]),s._v(" "),a("li",[a("code",[s._v("eval-source-map")]),s._v(" :\n"),a("ul",[a("li",[s._v("每个源模块文件对应生成一个内联map")]),s._v(" "),a("li",[s._v("准确提示源代码的错误文件,错误行数")])])]),s._v(" "),a("li",[a("code",[s._v("nosources-source-map")]),s._v(" "),a("ul",[a("li",[s._v("外部")]),s._v(" "),a("li",[s._v("能找到错误代码准确信息,但不能追踪到源代码(防止代码泄露)")]),s._v(" "),a("li",[s._v("全部隐藏")])])]),s._v(" "),a("li",[a("code",[s._v("cheap-source-map")]),s._v(" "),a("ul",[a("li",[s._v("外部")]),s._v(" "),a("li",[s._v("准确提示源代码的错误文件,只提示错误代码"),a("strong",[s._v("行")])])])]),s._v(" "),a("li",[a("code",[s._v("cheap-module-source-map")]),s._v(" "),a("ul",[a("li",[s._v("外部")]),s._v(" "),a("li",[s._v("准确提示源代码的错误文件,只提示错误代码"),a("strong",[s._v("行")])]),s._v(" "),a("li",[s._v("module会将loader的source map加入")])])])])]),s._v(" "),a("li",[a("p",[s._v("如何使用"),a("code",[s._v("source-map")])]),s._v(" "),a("ul",[a("li",[s._v("开发环境 :需要速度快,调试更友好\n"),a("ul",[a("li",[a("code",[s._v("eval-source-map")])]),s._v(" "),a("li",[a("code",[s._v("eval-cheap-module-source-map")])])])]),s._v(" "),a("li",[s._v("生产环境: 源代码要不要隐藏?调试要不要更友好?\n"),a("ul",[a("li",[s._v("内联map会让代码体积变大,所以生产环境下不用内联")]),s._v(" "),a("li",[s._v("如果需要隐藏用\n"),a("ul",[a("li",[a("code",[s._v("nosources-source-map")])]),s._v(" "),a("li",[a("code",[s._v("hidden-source-map")])])])]),s._v(" "),a("li",[s._v("一般用"),a("code",[s._v("source-map")]),s._v("就行")])])])])])]),s._v(" "),a("h2",{attrs:{id:"生产环境的性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境的性能优化"}},[s._v("#")]),s._v(" 生产环境的性能优化")]),s._v(" "),a("h3",{attrs:{id:"优化打包构建速度-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化打包构建速度-2"}},[s._v("#")]),s._v(" 优化打包构建速度")]),s._v(" "),a("h4",{attrs:{id:"oneof的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oneof的使用"}},[s._v("#")]),s._v(" oneof的使用")]),s._v(" "),a("ol",[a("li",[s._v("正常来讲一个类型的文件只需要匹配一个"),a("code",[s._v("rules")]),s._v("里的"),a("code",[s._v("loader")])]),s._v(" "),a("li",[s._v("此时用oneOf来优化"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v(" rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  \n         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注意,oneOf里面一定不能有两个配置处理同一种类型的文件")]),s._v("\n         oneOf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])]),s._v(" "),a("h4",{attrs:{id:"babel缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel缓存"}},[s._v("#")]),s._v(" babel缓存")]),s._v(" "),a("ol",[a("li",[s._v("babel缓存\n"),a("ul",[a("li",[a("p",[s._v("在生产环境中,如果改一个js代码,不打算重新构建所有代码时,可以使用babel缓存")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n    loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babe-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        presets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        cacheDirectory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("作用")]),s._v(" :此缓存让第二次打包构建速度更快")])])])])]),s._v(" "),a("h4",{attrs:{id:"多进程打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多进程打包"}},[s._v("#")]),s._v(" 多进程打包")]),s._v(" "),a("ol",[a("li",[s._v("下载"),a("code",[s._v("thread-loader")])]),s._v(" "),a("li",[s._v("一般跟"),a("code",[s._v("babel-loader")]),s._v("一起使用,放在"),a("code",[s._v("babel-loader")]),s._v("的前面")]),s._v(" "),a("li",[a("strong",[s._v("注意事项")]),s._v(" "),a("ul",[a("li",[s._v("进程启动大概为600ms,所以进程通信启动也有开销")]),s._v(" "),a("li",[s._v("只有工作消耗时间比较长,才需要多进程打包")])])]),s._v(" "),a("li",[s._v("使用:"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        loeder"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"thread-loader"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            workers "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开启两个进程2")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h4",{attrs:{id:"externals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#externals"}},[s._v("#")]),s._v(" externals")]),s._v(" "),a("ol",[a("li",[s._v("在config.js中配置"),a("code",[s._v("externals")]),s._v("属性"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//拒绝jquery打包")]),s._v("\n    externals "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        jquery "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jQuery"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[s._v("注意:库被拒绝打包的情况下,需要手动在源代码的html中引入cdn链接调用这些库")])]),s._v(" "),a("h4",{attrs:{id:"dll技术"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dll技术"}},[s._v("#")]),s._v(" dll技术")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("dll")]),s._v("技术,对某些库(jquery,react,vue...)进行单独打包\n"),a("ul",[a("li",[s._v("如果用"),a("code",[s._v("cdn链接调用第三方库的话")]),s._v("的话,不需要用"),a("code",[s._v("dll")]),s._v(",用"),a("code",[s._v("externals")]),s._v("就行")])])]),s._v(" "),a("li",[s._v("与"),a("code",[s._v("externals")]),s._v("区别:\n"),a("ul",[a("li",[s._v("dll技术:相当于对库提前打包,然后每次要用的时候直接拿就行,不用每次都对库进行打包,提高打包速度")]),s._v(" "),a("li",[s._v("externals技术: 完全不对库进行打包")])])]),s._v(" "),a("li",[s._v("使用\n"),a("ol",[a("li",[s._v("在"),a("code",[s._v("webpacl.dll.js")]),s._v("的配置文件中配置\n"),a("ul",[a("li",[a("code",[s._v("webpacl.dll.js")]),s._v("是对第三方库进行单独处理时的配置文件")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//属性名:最后打包生成的名字: jquery")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//属性值: 需要打包的库名 "jquery"')]),s._v("\n            jquery "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jquery"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//[name]为entry定义的属性名")]),s._v("\n            filename "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[name].js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dll"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打包的库里面向外暴露出去的内容叫什么名字")]),s._v("\n            library "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[name]_[hash:10]"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打包生成一个manifest.json,提供与jquery映射")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DllPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//映射库中暴露的名字")]),s._v("\n                name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[name]_[hash:10]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出的文件路径")]),s._v("\n                path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dll/manifest.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[s._v("运行"),a("code",[s._v("webpack --config webpacl.dll.js")]),s._v(" "),a("ul",[a("li",[s._v("因为运行webpack默认打包"),a("code",[s._v("webpack.config.js")]),s._v(",所以需要打包"),a("code",[s._v("webpack.dll.js")]),s._v("时,需要指定")])])])])])]),s._v(" "),a("ul",[a("li",[s._v("在"),a("code",[s._v("webpack.config.js")]),s._v("中加插件,告诉主配置文件,哪些第三方包需要引用"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    plugins "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//告诉webpack哪些库不参与打包,同时使用时名字也得变")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DllReferencePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            manifest "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dll/manifest.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将之前在webpack.dll.js中打包的库引进来调用")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AddAssetHtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            filepath "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dll/jquery.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])])])]),s._v(" "),a("h3",{attrs:{id:"优化代码运行的性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化代码运行的性能"}},[s._v("#")]),s._v(" 优化代码运行的性能")]),s._v(" "),a("h4",{attrs:{id:"文件资源缓存-浏览器默认"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件资源缓存-浏览器默认"}},[s._v("#")]),s._v(" 文件资源缓存(浏览器默认)")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("问题")]),s._v(":文件名字如果不变,缓存就不会变,导致服务器上的修改无法及时反映到浏览器的缓存")]),s._v(" "),a("li",[a("strong",[s._v("解决")]),s._v(":每次打包时自动修改文件名,\n"),a("ul",[a("li",[s._v("给文件名加一个hash值")]),s._v(" "),a("li",[s._v("此hash值为webpack每次打包产生的hash值\n"),a("ul",[a("li",[s._v("hash值"),a("code",[s._v("[hash:10]")]),s._v("  :每次打包生成的唯一hash值")]),s._v(" "),a("li",[s._v("chunkhash值"),a("code",[s._v("[chunkhashhash:10]")]),s._v(": 根据同一个entry生成的hash值")]),s._v(" "),a("li",[s._v("contenthash值 "),a("code",[s._v("[contenthash:10]")]),s._v(" : 根据文件内容生成的hash值.不同文件hash值一定不一样")])])]),s._v(" "),a("li",[s._v("除了contenthash值都有"),a("strong",[s._v("问题")]),s._v(": js和css同时使用一个hash值,如果只修改了一种文件然后重新打包,js,css文件的缓存都会失效")])])]),s._v(" "),a("li",[a("strong",[s._v("作用")]),s._v(" :此缓存让代码上线运行时,缓存更好的被利用")])]),s._v(" "),a("h4",{attrs:{id:"tree-shaking-树摇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking-树摇"}},[s._v("#")]),s._v(" tree shaking(树摇)")]),s._v(" "),a("ol",[a("li",[s._v("前提:\n"),a("ul",[a("li",[s._v("必须使用es6环境")]),s._v(" "),a("li",[s._v("开启production模式")])])]),s._v(" "),a("li",[s._v("作用: 减少代码体积")]),s._v(" "),a("li",[s._v("最好在在package.json中配置sideEffects,否则可能会因为版本原因打包的时候把css之类的文件给删掉"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("sideEffects"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.less"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])]),s._v(" "),a("h4",{attrs:{id:"code-split-代码分割"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-split-代码分割"}},[s._v("#")]),s._v(" code split(代码分割)")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("第一种方式")]),s._v(":配置多入口(entry)")]),s._v(" "),a("ul",[a("li",[s._v("单入口")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n")])])]),a("ul",[a("li",[s._v("多入口")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("entry "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    main "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\noutput "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//[name]表示取入口文件的文件名")]),s._v("\n    filename "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"js/[name].js"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("第二种方式")]),s._v(":在"),a("code",[s._v("config.js")]),s._v("中配置"),a("code",[s._v("optimization")]),s._v("属性")]),s._v(" "),a("ul",[a("li",[s._v("可以将node_modules中的代码单独打包成一个文件")]),s._v(" "),a("li",[s._v("可以自动分析多入口chunk中,有没有公共的文件,如果有就会打包成单独的一个chunk")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("optimization "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    splitChunks"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        chunks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("all\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("第三种方式")]),s._v(":通过js代码,让某个文件被单独打包成一个chunk")]),s._v(" "),a("ul",[a("li",[s._v("import动态导入语法,"),a("strong",[s._v("不需要配置config.js成多入口")])])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* webpackChunkName = "test"*/')]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//promise对象参数是xxx.js的module对象")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件加载成功")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件加载失败")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ul",[a("li",[a("code",[s._v('/* webpackChunkName = "tetst"*/')]),s._v(" 在导入文件参数前加此"),a("strong",[s._v("注释")]),s._v("可以给打包成的chunk命名")])])])]),s._v(" "),a("h4",{attrs:{id:"lazy-loading-懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lazy-loading-懒加载"}},[s._v("#")]),s._v(" lazy loading(懒加载)")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("让页面需要用到某个js文件时,才加载这个js文件.而不是一上来就加载全部js文件")])]),s._v(" "),a("li",[a("p",[s._v("还是通过import动态导入语法,来实现懒加载")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".btn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onclick")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* webpackChunkName = "test"*/')]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//promise对象参数是xxx.js的module对象")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件加载成功")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//调用xxx.js文件中的print()方法")]),s._v("\n            module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"懒加载成功"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件加载失败")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h4",{attrs:{id:"prefetch-预加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prefetch-预加载"}},[s._v("#")]),s._v(" prefetch(预加载)")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("会在使用某个js文件之前,提前加载js文件")])]),s._v(" "),a("li",[a("p",[s._v("与正常加载的区别")]),s._v(" "),a("ul",[a("li",[s._v("正常加载为并行加载(同一时间加载多个文件)")]),s._v(" "),a("li",[s._v("预加载时等其他资源加载完毕,浏览器空闲了,再偷偷加载资源")]),s._v(" "),a("li",[s._v("有兼容性的问题,一般只有pc浏览器采用")])])]),s._v(" "),a("li",[a("p",[s._v("还是通过import动态导入语法,来实现预加载,与懒加载只区别于一段注释"),a("code",[s._v("/* webpackPrefetch :true */")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".btn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onclick")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* webpackChunkName = "test",webpackPrefetch :true*/')]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h4",{attrs:{id:"pwa-渐进式网络开发应用程序-离线可访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pwa-渐进式网络开发应用程序-离线可访问"}},[s._v("#")]),s._v(" PWA:渐进式网络开发应用程序(离线可访问)")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("workbox")]),s._v(" "),a("ul",[a("li",[s._v("下载workbox-webpack-plugin")])])]),s._v(" "),a("li",[a("p",[s._v("使用:")]),s._v(" "),a("ul",[a("li",[s._v("在"),a("code",[s._v("config的plugin")]),s._v("中配置并启动"),a("code",[s._v("serviceWorker")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    plugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WorkboxWebpackPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("GenerateSW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//帮助serviceWorker快速启动")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//删除旧的serviceWorker")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//生成一个serviceWorker配置文件")]),s._v("\n            clientsClaim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            skipWaiting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])]),s._v(" "),a("li",[s._v("在入口js文件中使用"),a("code",[s._v("serviceWorker")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//需要判断浏览器是否支持")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("serviceWorker "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//当页面加载完成时回调")]),s._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"load"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注册用WorkboxWebpackPlugin.GenerateSW插件配置完成的service-worker")]),s._v("\n        navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("serviceWorker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./service-worker.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注册成功")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注册失败")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("注意事项")]),s._v(":")]),s._v(" "),a("ul",[a("li",[s._v("eslint不认识window,navigator等浏览器的全局变量,需要配置"),a("code",[s._v("package.json")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("eslintConfig"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"env"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        browser "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[s._v("serviceWorker必须运行在服务器上\n"),a("ul",[a("li",[s._v("第一种开启服务器方式:使用node.js打开服务器")]),s._v(" "),a("li",[s._v("第二种开启服务器方式:下载serve包来开启服务器(遍历)\n"),a("ul",[a("li",[a("code",[s._v("npm i serve -g")]),s._v(" 必须全局下载")]),s._v(" "),a("li",[a("code",[s._v("serve -s bulid")]),s._v(" 启动服务器,将bulid目录下的所有资源作为静态资源暴露出去")])])])])])])])]),s._v(" "),a("h2",{attrs:{id:"webpack的详细配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack的详细配置"}},[s._v("#")]),s._v(" webpack的详细配置")]),s._v(" "),a("h3",{attrs:{id:"entry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entry"}},[s._v("#")]),s._v(" entry")]),s._v(" "),a("ol",[a("li",[s._v("入口起点：\n"),a("ol",[a("li",[s._v("string :"),a("code",[s._v("./src/index.js")]),s._v(" "),a("ul",[a("li",[s._v("单入口")]),s._v(" "),a("li",[s._v("打包形成一个chunk,输出一个bundle文件")]),s._v(" "),a("li",[s._v("chunk的名称默认是main")])])]),s._v(" "),a("li",[s._v("array :"),a("code",[s._v('["./src/index.js","./src/add.js"]')]),s._v(" "),a("ul",[a("li",[s._v("多入口")]),s._v(" "),a("li",[s._v("所有入口文件最终形成一个chunk,输出一个bundle文件")]),s._v(" "),a("li",[s._v("一般在HMR功能中让html热更新生效")])])]),s._v(" "),a("li",[s._v("object :"),a("code",[s._v('{main: "./src/index,js",add:"./src/add.js"}')]),s._v(" "),a("ul",[a("li",[s._v("多入口")]),s._v(" "),a("li",[s._v("有几个入口文件,就形成几个chunk,同时输出几个bundle文件")]),s._v(" "),a("li",[s._v("chunk的名称为定义的属性名")])])]),s._v(" "),a("li",[s._v("object时的特殊用法 :")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("jquery "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jqeury"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nreact"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react-yyy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[s._v("#")]),s._v(" output")]),s._v(" "),a("ol",[a("li",[s._v("filename :指定输出的文件名称(指定名称+目录)")]),s._v(" "),a("li",[s._v("path : 指定输出文件目录(将来所有资源输出的公共目录)")]),s._v(" "),a("li",[s._v("publicPath: 指定所有资源引入公共路径的前缀.一般设置为"),a("code",[s._v('"/"')])]),s._v(" "),a("li",[s._v("chunkFilename : 指定非入口chunk的名称\n"),a("ul",[a("li",[s._v("通过import直接引入js代码的js文件,或者通过optimization配置的node_modules的js文件")])])]),s._v(" "),a("li",[s._v("library : 指定打包的文件向外暴露出去的变量名\n"),a("ul",[a("li",[s._v("如果没设置的话,打包完的js文件是匿名的")]),s._v(" "),a("li",[s._v("一般配合dll技术打包第三方库使用")])])]),s._v(" "),a("li",[s._v("libraryTarget : 指定通过哪种规范暴露出去\n"),a("ul",[a("li",[s._v("commonjs 变量名以commonjs的规范暴露出去")]),s._v(" "),a("li",[s._v("window  变量名添加到window上")]),s._v(" "),a("li",[s._v("global 变量名添加到node上")])])])]),s._v(" "),a("h3",{attrs:{id:"module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[s._v("#")]),s._v(" module")]),s._v(" "),a("ol",[a("li",[s._v("基本上只适用rules")]),s._v(" "),a("li",[s._v("rules中配置loader\n"),a("ol",[a("li",[s._v("test : 检查哪些文件")]),s._v(" "),a("li",[s._v("use : 用哪些loader")]),s._v(" "),a("li",[s._v("exclude : 排除哪些文件")]),s._v(" "),a("li",[s._v("include : 传一个路径,只查该路径下的文件")]),s._v(" "),a("li",[s._v("loader : 单个loader的情况下用此属性,否则用use")]),s._v(" "),a("li",[s._v("enforece :\n"),a("ul",[a("li",[s._v("pre  优先执行")]),s._v(" "),a("li",[s._v("post 延后执行")])])]),s._v(" "),a("li",[s._v("oneOf:该属性下的loader配置只会生效一个")])])])]),s._v(" "),a("h3",{attrs:{id:"resolve-配置解析模块的规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resolve-配置解析模块的规则"}},[s._v("#")]),s._v(" resolve :配置解析模块的规则")]),s._v(" "),a("ol",[a("li",[s._v("alias :配置解析模块路径别名 :\n"),a("ul",[a("li",[s._v("优点: 简写路径")]),s._v(" "),a("li",[s._v("缺点 : 写路径无提示")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("resolve "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    alias "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        $css "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src/css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[s._v("配置完以上代码后,源代码中的js文件引入css文件只需要写"),a("code",[s._v('import "$css/xxxx.css"')])])])]),s._v(" "),a("li",[s._v("extensions : 配置省略文件路径的后缀名"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("extensions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".css"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])]),s._v(" "),a("li",[s._v("modules : 指定去哪个目录找webpack命令"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("modules "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../../node_modules"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"devserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[s._v("#")]),s._v(" devServer")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("contentBase : 运行代码的目录")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("contentBase "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("compress : 启动.gzip压缩")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("true")])])])]),s._v(" "),a("li",[a("p",[s._v("port: 指定端口号")]),s._v(" "),a("ul",[a("li",[a("code",[s._v('"50000"')])])])]),s._v(" "),a("li",[a("p",[s._v("host : 指定域名")]),s._v(" "),a("ul",[a("li",[a("code",[s._v('"localhost"')])])])]),s._v(" "),a("li",[a("p",[s._v("open : 是否自动打开浏览器")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("true")])])])]),s._v(" "),a("li",[a("p",[s._v("hot : 是否开启HMR功能")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("true")])])])]),s._v(" "),a("li",[a("p",[s._v("watchContentBase : 监视contentBase目录下的所有文件,一旦文件变化就会reload")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("true")])])])]),s._v(" "),a("li",[a("p",[s._v("watchOptions :监视文件时忽略文件")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("watchOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//一点要忽略node_modules")]),s._v("\n    ignored "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/node_modules/"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("clientLogLevel :不要显示启动服务器日志信息")]),s._v(" "),a("ul",[a("li",[a("code",[s._v('"none"')])])])]),s._v(" "),a("li",[a("p",[s._v("quiet :除了一些基本启动信息,其他内容都不要显示")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("true")])])])]),s._v(" "),a("li",[a("p",[s._v("overlay : 如果出错了,不要全屏提示")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("false")])])])]),s._v(" "),a("li",[a("p",[s._v("proxy :服务器代理,解决开发环境跨域问题")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("proxy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//一旦devServer(5000)服务器接收到了api/xxx的请求,就会把请求转发给另一个服务器(3000)")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        target "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost :3000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//服务器3000发送请求时,请求路径重写:api/xxx --\x3e xxx(去掉api)")]),s._v("\n        pathRewrite "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^/api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"optimization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optimization"}},[s._v("#")]),s._v(" optimization")]),s._v(" "),a("ol",[a("li",[s._v("splitChunks : 分割成多个chunk\n"),a("ul",[a("li",[s._v("一般需要把node_modules的文件单独打包成chunk时设置")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("optimization"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    splitChunks"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        chunks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[s._v("splitChunks的默认值\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/kakigakki/picBed/master/imgs/20200504182552.png",alt:"20200504182552"}})])])]),s._v(" "),a("li",[s._v("runtimeChunk : 将当前模块记录其他模块的hash单独打包为一个文件"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("runtimeChunk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("entrypoint")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("runtime-")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("entrypoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[s._v("如果不设置这个选项的话,当一个文件import引入第二个文件时,而这两个文件的名字都是用contenthash值命名的话,当第二个文件内容修改了重新打包了,hash值发生变化,第一个文件因为引入了第二个文件,所以第一个文件内的第二个文件的名字也发生变化,导致了第一个文件的内容也发生变化,这时导致了构建时的缓存失效,构建速度就变慢了")])])]),s._v(" "),a("li",[s._v("minimizer :配置生产环境的压缩方案 : js和css\n"),a("ul",[a("li",[s._v("比上文介绍的OptimizeCssAssetsWebpackPlugin更好用")]),s._v(" "),a("li",[s._v("webpack4.2.x版本以上支持")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("minimizer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TerserWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开启缓存")]),s._v("\n        cache "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开启多进程打包")]),s._v("\n        parallel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//启动source-map")]),s._v("\n        sourceMap "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);